
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Resultado</title>
    <link rel="stylesheet" type="text/css" href="page.css" media="screen" />

      <style>


/*
table {
	 border-spacing: 1;
	 border-collapse: collapse;
	 background: white;
	 border-radius: 6px;
	 overflow: hidden;
	 max-width: 800px;
	 width: 100%;
	 margin: 0 auto;
	 position: relative;
}
 table * {
	 position: relative;
}
 table td, table th {
	 padding-left: 8px;
}
 table thead tr {
	 height: 60px;
	 background: rgb(226, 200, 228);;
	 font-size: 16px;
}
 table tbody tr {
	 height: 48px;
	 border-bottom: 1px solid #e3f1d5;
}
 table tbody tr:last-child {
	 border: 0;
}
 table td, table th {
	 text-align: center;
}
 table td.l, table th.l {
	 text-align: center;
}
 table td.c, table th.c {
	 text-align: center;
}
 table td.r, table th.r {
	 text-align: center;
}
 @media screen and (max-width: 35.5em) {
	 table {
		 display: block;
	}
	 table > *, table tr, table td, table th {
		 display: block;
	}
	 table thead {
		 display: none;
	}
	 table tbody tr {
		 height: auto;
		 padding: 8px 0;
	}
	 table tbody tr td {
		 padding-left: 45%;
		 margin-bottom: 12px;
	}
	 table tbody tr td:last-child {
		 margin-bottom: 0;
	}
	 table tbody tr td:before {
		 position: absolute;
		 font-weight: 700;
		 width: 40%;
		 left: 10px;
		 top: 0;
	}
	 table tbody tr td:nth-child(1):before {
		 content: "Code";
	}
	 table tbody tr td:nth-child(2):before {
		 content: "Stock";
	}
	 table tbody tr td:nth-child(3):before {
		 content: "Cap";
	}
	 table tbody tr td:nth-child(4):before {
		 content: "Inch";
	}
	 table tbody tr td:nth-child(5):before {
		 content: "Box Type";
	}
}*/
 body {
	 font: 400 14px  'Calibri';
	 padding: 20px;
}
 blockquote {
	 color: white;
	 text-align: center;
}
     
        body {                
                background: rgb(255,143,254);
                background: linear-gradient(160deg, rgba(255,143,254,0.7259278711484594) 0%, rgba(15,27,116,0.8127626050420168) 100%);
                backdrop-filter: blur(10px);

                background-size: cover;
                height: 860px;
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                
              }
              
             form {
                width: 80%;
                background-color: #fff;
                border-radius: 5px;
                box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.3);
                margin: 0 auto;
                margin-top: 100px;
                padding: 20px;
                text-align: center;
                
              }
              

        
            .container {
             display: flex;
            }
        
            .left-div, .right-div {
            flex: 1;
            ;
            }
        
            .left-div {
            padding: 10px;
            
            }
        
            .right-div {            
            padding: 10px;

            }
            .rounded-tl{
                 border-top-left-radius: 23px;
                }
          
              .table-container2 {
                width: 90%;
                text-align: left;
                margin: 40px auto;
                font-size: 1.25em;
                overflow: hidden;
                
              }
        
              .rounded-tl{
                 border-top-left-radius: 23px;
                }

                .destaque {
                font-weight: bold;
                background-color: rgba(255, 0, 0, 0.486);
                }
                .destaque2 {
                font-weight: bold;
                background-color: rgba(250, 250, 165, 0.767);
                }
                .destaque3 {
                font-weight: bold;
                background-color: rgba(73, 214, 68, 0.486);
                }
                .tabela-com-scroll {
                max-height: 400px; /* Define uma altura máxima para a <div> */
                overflow: auto; /* Adiciona uma barra de rolagem caso a tabela ultrapasse a altura da <div> */
                }       
                .tabela-com-scroll::-webkit-scrollbar {
                width: 12px;
                }

                .tabela-com-scroll::-webkit-scrollbar-track {
                background: #f1f1f1;
                }

                .tabela-com-scroll::-webkit-scrollbar-thumb {
                background-color: #888;
                border-radius: 10px;
                border: 3px solid #f1f1f1;
                }

table {
  border-collapse: collapse;
  width: 100%;
  max-width: 800px;
  margin: 0 auto;
  font-family:  Calibri,  sans-serif;
}

table th, table td {
  padding: 12px;
  text-align: center;
  border: 1px solid #ddd;
}

table th {
  background-color: #f2f2f2;
  color: #333;
}

table tr:nth-child(even) {
  background-color: #f9f9f9;
}

table tr:hover {
  background-color: #f5f5f5;
}

table caption {
  font-size: 1.2em;
  font-weight: bold;
  margin-bottom: 10px;
}


.table3 {
  border-collapse: collapse;
  width: 100%;
  max-width: 800px;
  margin: 0 auto;
  font-family: Arial, sans-serif;
}

.table3 th, .table3 td {
  padding: 12px;
  text-align: left;
  border: 1px solid #ddd;
}

.table3 th {
  background-color: #f2f2f2;
  color: #333;
}

.table3 tr:nth-child(even) {
  background-color: #f9f9f9;
}

.table3 tr:hover {
  background-color: #f5f5f5;
}

.table3 caption {
  font-size: 1.2em;
  font-weight: bold;
  margin-bottom: 10px;
}








                .tabela-com-scroll::-webkit-scrollbar-thumb:hover {
                background-color: #555;
                }
                #filtro {
                margin-bottom: 10px;
                padding: 8px;
                border: 1px solid #ccc;
                border-radius: 4px;
                }
                
            </style>





   

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" conte,nt="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
</head>
<body>
    <form>
        <div class="table-container2">
            <div class="container">
                <div class="left-div" >
                    <h3>Base Original:</h3>
                    
                    <canvas id="myChart" ></canvas>
                    

                    <h3>Base Original[Pontos de Criticidade]:</h3>
                    <table class="testetable2">
                        <thead>
                            <tr>
                                {% for key in data_crit[0].keys() %}
                                    <th>{{ key }}</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            {% for row in data_crit %}
                                <tr>
                                    {% for key, value in row.items() %}
                                        <td>{{ value }}</td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <h3>Base Original:</h3>
                    
                    <table class="rwd-table">
                        <thead>
                            <tr>
                                {% for key in data[0].keys() %}
                                    <th>{{ key }}</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            {% for row in data %}
                                <tr>
                                    {% for key, value in row.items() %}
                                        <td>{{ value }}</td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="right-div">
                    <h3>Calibração Solver S:</h3>
                    
                    <canvas id="myChart2" ></canvas>




                    <h3>Calibração Solver S[Pontos de Criticidade]:</h3>
                    <table class="testetable">
                        <thead>
                            <tr>
                                {% for key in data2_crit[0].keys() %}
                                    <th>{{ key }}</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            {% for row in data2_crit %}
                                <tr>
                                    {% for key, value in row.items() %}
                                        <td>{{ value }}</td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <h3>Calibração Solver S:</h3>
                    

                    <table class="div">
                        <thead>
                            <tr>
                                {% for key in data2[0].keys() %}
                                    <th>{{ key }}</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            {% for row in data2 %}
                                <tr>
                                    {% for key, value in row.items() %}
                                        <td>{{ value }}</td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    <form>






        <input type="text" id="filtro" placeholder="Digite aqui para filtrar">
  <!--       <table class="table3">
          <thead>
            <tr>
              <th>Nome</th>
              <th>Idade</th>
              <th>Sexo</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>João</td>
              <td>20</td>
              <td>Masculino</td>
            </tr>
            <tr>
              <td>Julia</td>
              <td>25</td>
              <td>Feminino</td>
            </tr>
            <tr>
              <td>Pedro</td>
              <td>30</td>
              <td>Masculino</td>
            </tr>
          </tbody>
        </table>-->
<div class="tabela-com-scroll">      
     <table class="table3" height = 600px>
            <thead>
                <tr>
                    {% for key in basevisao[0].keys() %}
                        <th>{{ key }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in basevisao %}
                    <tr>
                        {% for key, value in row.items() %}
                            <td>{{ value }}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table> 
</div>

    <a href="../teste"class="btn btn-secondary">Baixar Arquivo</a>
    <script> // Gráfico 1
        // Selecione o elemento canvas

                  var old_resultadoS = JSON.parse('{{ old_resultado|safe }}');
                  
                  var old_indiceS = JSON.parse('{{ old_indice|safe }}');
                  var limite_oldS = JSON.parse('{{ limite_old|safe }}');





                  var ctx = document.getElementById('myChart').getContext('2d');
                  var canvas = document.getElementById('myChart');
                  canvas.width = 100;
                  // Crie o gráfico de barras
                  var myChart = new Chart(ctx, {
                      type: 'bar',
                      data: {
                          labels: old_indiceS,
                          datasets: [{
                              label: 'HH',
                              data: old_resultadoS,
                              backgroundColor: [
                                  'rgba(255, 99, 132, 0.2)',
                                  'rgba(255, 99, 132, 0.2)',
                                  'rgba(255, 99, 132, 0.2)',
                                  'rgba(255, 99, 132, 0.2)',
                                  'rgba(255, 99, 132, 0.2)',
                                  'rgba(255, 99, 132, 0.2)',
                              ],
                              borderColor: [
                                  'rgba(255, 99, 132, 1)',
                                  'rgba(255, 99, 132, 1)',
                                  'rgba(255, 99, 132, 1)',
                                  'rgba(255, 99, 132, 1)',
                                  'rgba(255, 99, 132, 1)',
                                  'rgba(255, 99, 132, 1)',
                              ],
                              borderWidth: 1
                          },
                          {
                              label: 'Limite',
                              data: limite_oldS,
                              borderColor: 'rgba(255, 0, 0, 1)',
                              borderWidth: 2,
                              type: 'line',
                              fill: false
                          }]
                      },
                      options: {
                tooltips: {
                    callbacks: {
                        label: function(tooltipItem, data) {
                            var label = data.datasets[tooltipItem.datasetIndex].label || '';
                            if (label) {
                                label += ': ';
                            }
                            label += tooltipItem.yLabel;
                            return label;
                        }
                    }
                },
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true,
                            min: 0,
                            max: 100,
                            stepSize: 20
                        }
                    }]
                }
              }
                  });
        
    </script>
        
    <script> // Gráfico 2
                         var new_resultadoS = JSON.parse('{{new_resultado|safe }}');

                         var new_indiceS = JSON.parse('{{ new_indice|safe }}');
                         var limite_newS = JSON.parse('{{ limite_new|safe }}');
                
                          var ctx = document.getElementById('myChart2').getContext('2d');
                          var canvas = document.getElementById('myChart2');
                          canvas.width = 100;
                          // Crie o gráfico de barras
                          var myChart = new Chart(ctx, {
                              type: 'bar',
                              data: {
                                  labels:new_indiceS ,
                                  datasets: [{
                                      label: 'HH',
                                      data: new_resultadoS,
                                      backgroundColor: [
                                      'rgba(75, 192, 192, 0.2)',
                                      'rgba(75, 192, 192, 0.2)',
                                      'rgba(75, 192, 192, 0.2)',
                                      'rgba(75, 192, 192, 0.2)',
                                      'rgba(75, 192, 192, 0.2)',
                                      'rgba(75, 192, 192, 0.2)',
                                      ],
                                      borderColor: [
                                      'rgba(75, 192, 192, 1)',
                                      'rgba(75, 192, 192, 1)',
                                      'rgba(75, 192, 192, 1)',
                                      'rgba(75, 192, 192, 1)',
                                      'rgba(75, 192, 192, 1)',
                                      'rgba(75, 192, 192, 1)',
                                      ],
                                      borderWidth: 1
                                  },
                                  {
                                      label: 'HH',
                                      data: limite_newS,
                                      borderColor: 'rgba(255, 0, 0, 1)',
                                      borderWidth: 2,
                                      type: 'line',
                                      fill: false
                                  }]
                              },
                              options: {
                        tooltips: {
                            callbacks: {
                                label: function(tooltipItem, data) {
                                    var label = data.datasets[tooltipItem.datasetIndex].label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    label += tooltipItem.yLabel;
                                    return label;
                                }
                            }
                        },
                        scales: {

                            
                            yAxes: [{
                                
                                ticks: {
                                    beginAtZero: true,
                                    max: 5,
                                    min: 0,
                                    stepSize: 1

                                }
                            }]
                        }
                      }
                          });
                
    </script>
     
<script> // Function
function aplicarFormatacao(seletor) {
    const tabelas = document.querySelectorAll(seletor);

        const tabela = document.querySelector(seletor);
        const linhas = tabela.getElementsByTagName('tr');
        const colunas = tabela.getElementsByTagName('th');
        
        for (let y = 1; y < colunas.length; y++){

            for (let i = 1; i < linhas.length; i++) {
            const idade = parseInt(linhas[i].getElementsByTagName('td')[y].textContent);
            if (idade > 150) {
                linhas[i].getElementsByTagName('td')[y].classList.add('destaque');
            }
            else if (idade > 100) 
            {
                linhas[i].getElementsByTagName('td')[y].classList.add('destaque2');
            }
            else if (idade > 0) 
            {
                linhas[i].getElementsByTagName('td')[y].classList.add('destaque3');
            }

            }
        }


}

aplicarFormatacao('.testetable');
aplicarFormatacao('.testetable2');
</script>

<script>
const filtro = document.getElementById('filtro');
const tabela = document.querySelector('.table3');
const linhas = tabela.getElementsByTagName('tr');

filtro.addEventListener('keyup', () => {
  const termo = filtro.value.toLowerCase().trim();
  for (let i = 1; i < linhas.length; i++) {
    const nome = linhas[i].getElementsByTagName('td')[0].textContent.toLowerCase();
    if (nome.includes(termo)) {
      linhas[i].style.display = '';
    } else {
      linhas[i].style.display = 'none';
    }
  }
});
</script>

</body>